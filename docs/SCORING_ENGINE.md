# VinSight Scoring Engine Documentation

## Current Version: v9.2 (The Reasoning Engine)
**Release Date:** February 2026
**Philosophy:** "Quantitative Foundation + GenAI Reasoning."
A hybrid system where an AI agent acts as the Lead Analyst, interpreting raw data and benchmarks to form a conviction score, backed by a mathematical fallback engine.

### 1. The Core Architecture (Reasoning First)
The "Score" is no longer a static formula. It is a **Reasoned Verdict** generated by a Large Language Model (Gemini 1.5 Flash or Llama 3.3) acting as a specific persona (CFA, Trader, Value Investor).

-   **Primary Engine**: `ReasoningScorer` (AI-based)
-   **Fallback Engine**: `VinSightScorer` (v9.0 Formula-based)

### 2. The AI Scoring Process
The AI receives a massive context payload including:
1.  **Fundamental Metrics** (P/E, PEG, ROE, Margins)
2.  **Sector Benchmarks** (The "Fair" values for that industry)
3.  **Technical Indicators** (RSI, SMAs, MACD)
4.  **Qualitative Context** (Recent Earnings Call Sentiment, Outlook)

The AI outputs a structured JSON assessment:
```json
{
  "total_score": 0-100,            // The headline conviction
  "summary": "Executive summary...",
  "component_scores": {            // Granular 0-10 grading
    "valuation": 7,
    "growth": 8,
    "profitability": 9,
    "momentum": 4,
    "trend": 5,
    "volume": 6
  },
  "risk_factors": ["Margin pressure", "Debt load"]
}
```

### 3. Split Analysis (Quality vs. Timing)
The system aggregates the AI's component scores into two visual pillars for the "Split Cards" UI:

#### A. Fundamental Quality Score (0-100)
*Average of Valuation, Growth, and Profitability.*
> Represents the "Investability" of the business.

#### B. Technical Timing Score (0-100)
*Average of Momentum, Trend, and Volume.*
> Represents the "Tradeability" of the stock right now.

---

## 4. The Fallback Model (v9.0 Dynamic Formula)
*This engine activates automatically if the AI service fails or is disabled.*

**Philosophy:** "Institutional Precision." Adaptive intelligence that recalibrates thresholds based on 12+ industry themes.

### The Core Equation (Fallback)
```python
Final Score = (Quality Score * 0.70) + (Timing Score * 0.30)
```

| Factor | Weight | Scoring Mechanism |
| :--- | :--- | :--- |
| **Quality Score** | 70% | Linear Interpolation against **Sector Benchmarks** |
| **Timing Score** | 30% | Linear Interpolation against **Volatility (Beta) Context** |

### Kill Switches (Vetos)
*Used by both engines as "Hard Constraints"*
1.  **Insolvency Veto**: `Interest Coverage < 1.5x` (Cap: 40)
2.  **Valuation Veto**: `PEG Ratio > 4.0` (Quality Cap: 50)
3.  **Downtrend Veto**: `Price < SMA200` & `Price < SMA50` (Timing Cap: 30)

---

## 5. Insider Signal Logic (Smart Money)
**Release Date:** v9.1 (Feb 2026)
*Philosophy: "One sell is random; three sells is a signal."*

We analyze **only Discretionary Trades** (excluding 10b5-1 plans/gifts) over the last 90 days:

1.  **Cluster Selling (Red Alert -8 pts)**: 3+ unique executives selling within 14 days.
2.  **Net Selling (Yellow Warning -4 pts)**: More sellers than buyers.
3.  **Net Buying (Green Signal +6 pts)**: Net Flow > 0.

